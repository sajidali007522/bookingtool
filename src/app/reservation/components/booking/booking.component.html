<link type="text/css" rel="stylesheet" href="/assets/css/reservation.css" />

<div class="overlay-bg"></div>

<div class="custom-section-wrap" >
  <div class="alert alert-primary custom-logo-top no-icon m-0 alert-dismissible fade show" role="alert">
    Booking
  </div>
  <div class="custom-section" [ngClass]="{'table-loader': state.processing}">
    <ng-container>
      <div class="custom-main template-outer">
        <ng-container *ngIf="state.processing">
          <div class="table-loader">Processing...</div>
        </ng-container>
        <ng-container *ngIf="!state.processing">
          <div class="custom-content tabs-content" id="content-1" style="display: block;">
            <div class="">

              <div class="input-group mb-4 field-wrap field-gray-wrap traveler-field">
                <span class="user"></span>
                <ng-autocomplete
                  [data]="travelerList"
                  [searchKeyword]="keyword"
                  (selected)='selectTraveler($event)'
                  (inputChanged)='getloadProfiles($event)'
                  (inputFocused)='onFocused($event)'
                  [itemTemplate]="itemTemplateProfiles"
                  (inputCleared)="searchCleared('traveler-list')"
                  [notFoundTemplate]="notFoundProfilesTemplate"
                  [debounceTime]="400"
                  [isLoading]="state.isLoadingTraveler"
                  [minQueryLength]="3"
                  placeHolder="{{'Search Traveler.'}}"
                  class="flex-automate"
                  name="traveler"
                  autocomplete="off"
                >

                </ng-autocomplete>

                <ng-template #itemTemplateProfiles let-item>
                  <a href="javascript:void(0)">
                    <div class="auto-txtwrap">
                      <div class="autoicon">
                        <span class="fa" [ngClass]="{'fa-plane': item['glyph'] == 'airport', 'fa-map-marker': item['glyph'] == 'locality' }"></span>
                      </div>
                      <div class="autotxt">
                        <strong [innerHTML]="item.description"></strong><span>({{item.text}})</span>
                      </div>
                    </div>
                  </a>
                </ng-template>

                <ng-template #notFoundProfilesTemplate let-notFound>
                  {{state.errorMsg}}
                </ng-template>
                <div class="" *ngIf="state.error">
                  <label class="error">{{state.error['message']}}</label>
                </div>
                <div _ngcontent-gim-c105="" class="input-group-append">
                  <button type="button" class="btn btn-info ptb-10">Search <span class="fa fa-search position-static font-14 ml-2"></span></button>
                  <button type="button" class="btn btn-success ptb-10" (click)="addNewProfile()"> New Profile <span class="fa fa-plus position-static font-14"></span></button>
                </div>
              </div>
              <ng-container *ngIf="profiles">
                <div class="accordion custom-accordion accordion-sm accordion-has-book text-left" id="accordionExample" *ngFor="let profile of profiles; let i=index">
                <div class="mb-3">
                  <div class="card-header" id="headingOne">
                    <h2 class="accordion-link has-delete-icon" data-toggle="collapse" data-target="#collaps-1" aria-expanded="true">
                      Booking For {{profile.title}}
                      <a class="fa fa-trash-o remove-accordion" (click)="removeProfile(i)"></a>
                      <a class="btn btn-info btn-book" (click)="bookProfile(i, profile)">Book</a>
                    </h2>
                  </div>
                  <div id="collaps-1" class="collapse show" data-parent="#accordionExample">
                    <div class="box box-lr">
                      <div class="custom-accordion-wrap">
                        <div class="custom-accordion">
                          <h3 class=""><a href="javascript:void(0)">Profile</a></h3>
                          <div class="custom-accordion-content">
                            <div class="row">
                              <div class="col-md-6">
                                <div class="field-wrap-outer">
                                  <label for="">Title</label>
                                  <div class="field-wrap">
                                    <select class="form-control no-icon" [(ngModel)]="profile.details['title']">
                                      <option>Select Title</option>
                                    </select>
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="field-wrap-outer">
                                  <label for="">First Name</label>
                                  <div class="field-wrap">
                                    <input type="text" [(ngModel)]="profile.details['first_name']" class="form-control no-icon">
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="field-wrap-outer">
                                  <label for="">Last Name</label>
                                  <div class="field-wrap">
                                    <input type="text" [(ngModel)]="profile.details['last_name']" class="form-control no-icon">
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="field-wrap-outer">
                                  <label for="">Gender</label>
                                  <div class="field-wrap">
                                    <select class="form-control no-icon" [(ngModel)]="profile.details['gender']">
                                      <option>Select Gender</option>
                                      <option>Male</option>
                                      <option>Female</option>
                                    </select>
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="field-wrap-outer">
                                  <label for="">Email</label>
                                  <div class="field-wrap">
                                    <input type="text" [(ngModel)]="profile.details['email']" class="form-control no-icon">
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="field-wrap-outer">
                                  <label for="">Phone</label>
                                  <div class="field-wrap">
                                    <input type="text" [(ngModel)]="profile.details['phone']" class="form-control no-icon">
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="field-wrap-outer">
                                  <label for="">VIP Number</label>
                                  <div class="field-wrap">
                                    <input type="text" [(ngModel)]="profile.details['vip_number']" class="form-control no-icon">
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <!--<div class="custom-accordion">
                          <h3 class=""><a href="javascript:void(0)">Notes</a></h3>
                          <div class="custom-accordion-content">
                            <div class="row">
                              <div class="col-md-6">
                                <div class="field-wrap-outer">
                                  <label for="">First Name</label>
                                  <div class="field-wrap">
                                    <input type="text" class="form-control no-icon">
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="field-wrap-outer">
                                  <label for="">Last Name</label>
                                  <div class="field-wrap">
                                    <input type="text" class="form-control no-icon">
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="custom-accordion">
                          <h3 class=""><a href="javascript:void(0)">Travel Coordinator</a></h3>
                          <div class="custom-accordion-content ">
                            <div class="row">
                              <div class="col-md-6">
                                <div class="field-wrap-outer">
                                  <label for="">First Name</label>
                                  <div class="field-wrap">
                                    <input type="text" class="form-control no-icon">
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="field-wrap-outer">
                                  <label for="">Last Name</label>
                                  <div class="field-wrap">
                                    <input type="text" class="form-control no-icon">
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>-->
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              </ng-container>
            </div>
          </div>
        </ng-container>
        <!--<br/>
        <button type="submit" class="btn btn-info btn-block" (click)="submitForm()" [disabled]="state.processing">Next <span class="fa fa-spin fa-spinner" *ngIf="state.processing"></span></button>-->
      </div>

    </ng-container>
  </div>
</div>
