<link type="text/css" rel="stylesheet" href="/assets/css/reservation.css" />

<div class="overlay-bg"></div>

<div class="custom-section-wrap" [ngClass]="{'table-loader': state.loading}" >
  <div class="custom-section">
    <div class="custom-main template-outer">

      <div class="custom-content tabs-content" id="content-1" style="display: block;">
        <div class="">


          <div class="accordion custom-accordion accordion-sm text-left" id="accordionExample">
            <div class="mb-3">
              <div class="card-header" id="headingOne">
                <h2 class="accordion-link noDelIcon" data-toggle="collapse" data-target="#collaps-1" aria-expanded="true">
                  {{reportTemplate['displayName']}}
                </h2>
              </div>
              <div id="collaps-1" class="collapse show" data-parent="#accordionExample">
                <div class="box box-lr">
                  <div class="form-primary">
                    <label>Report</label>
                    <div class="field-wrap">
                      <select class="form-control" [(ngModel)]="form.template">
                        <option>Select</option>
                        <option *ngFor="let template of reportTemplate['reportTemplates']" [value]="template">{{template.name}}</option>
                      </select>
                      <span [ngClass]="{'fa fa-spin fa-spinner': state.loading, 'globel-world-icon': !state.loading}"></span>
                    </div>

                    <div class="row" id="report_fields">

                      <div class="col-md-6" *ngFor="let field of reportTemplate['reportFields']">
                        <label>{{field.label}}<span class="text-danger" *ngIf="field.isRequired"></span></label>
                        <div class="field-wrap">
                          <ng-container *ngIf="field.type == 0">
                            <input type="text" class="form-control" [(ngModel)]="field.model" />
                          </ng-container>
                          <ng-container *ngIf="field.type == 1"> <!--Date-->
                            <input type="text"
                                   [(ngModel)]="field.model"
                                   bsDatepicker
                                   [bsConfig]="bsConfig"
                                   [minDate]="minDateFrom"
                                   [maxDate]="maxDateFrom"
                                   placeholder="{{field.label}}"
                                   name="departure_date"
                                   autocomplete="off"
                                   class="form-control" />
                            <span class="fa fa-calendar-o"></span>
                          </ng-container>
                          <ng-container *ngIf="field.type == 2">
                            <input type="checkbox" [(ngModel)]="field.model" />
                          </ng-container>
                          <ng-container *ngIf="field.type == 3 && field.lookupName && !field.minSearchCharacters">
                            <select class="form-control no-icon" [(ngModel)]="field.model" *ngIf="field.lookupName">
                              <option value="">Select</option>
                              <option *ngFor="let item of field.options" [value]="item.value">{{item.text}}</option>
                            </select>
                          </ng-container>
                          <ng-container *ngIf="field.type == 3 && field.lookupName && field.minSearchCharacters">
                            <p>Autcomplete container</p>
                          </ng-container>
                        </div>
                      </div>
                    </div>

                  </div>

                </div>
              </div>
            </div>
          </div>

          <div class="reservation-bot-btns d-flex">
            <a href="javascript:void(0);" class="btn btn-danger">
              Refresh
            </a>
            <button type="submit" class="btn btn-success ml-auto" (click)="exportReport()" >Export</button>

            <div class="dropdown">
              <button class="btn btn-info dropdown-toggle plr-10 ml-3 exportOptions" type="button" id="dropdownMenuButton1" (click)="toggleDropdown($event)">
                {{this.form.exportType['label'] || 'Select'}}
              </button>
              <div class="dropdown-menu">
                <a href="javascript:void(0);" (click)="setExportType(type)" class="dropdown-item" *ngFor="let type of state.exportTypes">{{type.label}}</a>
              </div>
            </div>

          </div>
        </div>
      </div>

    </div>
  </div>
</div>
